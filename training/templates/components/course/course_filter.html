<div class="bg-white rounded-xl shadow-md border border-gray-200">
    <!-- Course Type Tabs -->
    <div class="border-b border-gray-200">
        <nav class="flex -mb-px space-x-8 px-4 overflow-x-auto">
            <button
                x-show="getTypeCount('RTG') > 0"
                @click="activeCategory = 'RTG'"
                :class="{'border-blue-500 text-blue-600 font-medium': activeCategory === 'RTG', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeCategory !== 'RTG'}"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Ratings (<span x-text="getTypeCount('RTG')"></span>)
            </button>

            <button
                x-show="getTypeCount('EDMT') > 0 || getTypeCount('FAM') > 0"
                @click="activeCategory = 'EDMT_FAM'"
                :class="{'border-blue-500 text-blue-600 font-medium': activeCategory === 'EDMT_FAM', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeCategory !== 'EDMT_FAM'}"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Endorsements & Familiarisation (<span
                    x-text="getTypeCount('EDMT') + getTypeCount('FAM')"></span>)
            </button>

            <button
                x-show="getTypeCount('GST') > 0"
                @click="activeCategory = 'GST'"
                :class="{'border-blue-500 text-blue-600 font-medium': activeCategory === 'GST', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeCategory !== 'GST'}"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Visitor (<span x-text="getTypeCount('GST')"></span>)
            </button>

            <button
                x-show="getTypeCount('RST') > 0"
                @click="activeCategory = 'RST'"
                :class="{'border-blue-500 text-blue-600 font-medium': activeCategory === 'RST', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeCategory !== 'RST'}"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Roster (<span x-text="getTypeCount('RST')"></span>)
            </button>
        </nav>
    </div>

    <!-- Course Selection Pills -->
    <div class="px-4 py-3 overflow-x-auto">
        <div x-show="activeCategory === 'RTG'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in getCoursesByType('RTG').sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'bg-blue-50 border-blue-500 text-blue-700': selectedCourseId === course.id, 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>

        <div x-show="activeCategory === 'EDMT_FAM'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in [...getCoursesByType('EDMT'), ...getCoursesByType('FAM')].sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'bg-blue-50 border-blue-500 text-blue-700': selectedCourseId === course.id, 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>

        <div x-show="activeCategory === 'GST'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in getCoursesByType('GST').sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'bg-blue-50 border-blue-500 text-blue-700': selectedCourseId === course.id, 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>

        <div x-show="activeCategory === 'RST'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in getCoursesByType('RST').sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'bg-blue-50 border-blue-500 text-blue-700': selectedCourseId === course.id, 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>
    </div>
</div>